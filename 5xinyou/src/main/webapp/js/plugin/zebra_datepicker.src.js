/**
 *  Zebra_DatePicker
 *
 *  Zebra_DatePicker is a small, compact and highly configurable date picker plugin for jQuery
 *
 *  Visit {@link http://stefangabos.ro/jquery/zebra-datepicker/} for more information.
 *
 *  For more resources visit {@link http://stefangabos.ro/}
 *
 *  @author     Stefan Gabos <contact@stefangabos.ro>
 *  @version    1.6.1 (last revision: November 03, 2012)
 *  @copyright  (c) 2011 - 2012 Stefan Gabos
 *  @license    http://www.gnu.org/licenses/lgpl-3.0.txt GNU LESSER GENERAL PUBLIC LICENSE
 *  @package    Zebra_DatePicker
 */
(function(a){a.Zebra_DatePicker=function(b,c){var d={always_show_clear:!1,always_visible:!1,days:["日","一","二","三","四","五","六"],days_abbr:!1,direction:0,disabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"重新选择",months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],months_abbr:!0,offset:[-225,275],pair:!1,readonly_element:!0,show_icon:!0,show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!0,onChange:null,onClear:null,onSelect:null},e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=this;J.settings={};var K=a(b),L=function(y){y||(J.settings=a.extend({},d,c)),J.settings.readonly_element&&K.attr("readonly","readonly");var E={days:["d","j"],months:["F","m","M","n","t"],years:["o","Y","y"]},F=!1,G=!1,L=!1;for(type in E)a.each(E[type],function(a,b){J.settings.format.indexOf(b)>-1&&(type=="days"?F=!0:type=="months"?G=!0:type=="years"&&(L=!0))});F&&G&&L?H=["years","months","days"]:!F&&G&&L?H=["years","months"]:!F&&!G&&L?H=["years"]:H=["years","months","days"],a.inArray(J.settings.view,H)==-1&&(J.settings.view=H[H.length-1]);var O=new Date,P=J.settings.reference_date?J.settings.reference_date:K.data("zdp_reference_date")?K.data("zdp_reference_date"):O,Q,R;z=undefined,A=undefined,p=P.getMonth(),m=O.getMonth(),q=P.getFullYear(),n=O.getFullYear(),r=P.getDate(),o=O.getDate();if(J.settings.direction===!0)z=P;else if(J.settings.direction===!1)A=P,D=A.getMonth(),C=A.getFullYear(),B=A.getDate();else if(!a.isArray(J.settings.direction)&&V(J.settings.direction)&&_(J.settings.direction)>0||a.isArray(J.settings.direction)&&(J.settings.direction[0]===!0||V(J.settings.direction[0])&&J.settings.direction[0]>0||(Q=M(J.settings.direction[0])))&&(J.settings.direction[1]===!1||V(J.settings.direction[1])&&J.settings.direction[1]>=0||(R=M(J.settings.direction[1]))))Q?z=Q:z=new Date(q,p,r+(a.isArray(J.settings.direction)?_(J.settings.direction[0]===!0?0:J.settings.direction[0]):_(J.settings.direction))),p=z.getMonth(),q=z.getFullYear(),r=z.getDate(),R&&+R>=+z?A=R:!R&&J.settings.direction[1]!==!1&&a.isArray(J.settings.direction)&&(A=new Date(q,p,r+_(J.settings.direction[1]))),A&&(D=A.getMonth(),C=A.getFullYear(),B=A.getDate());else if(!a.isArray(J.settings.direction)&&V(J.settings.direction)&&_(J.settings.direction)<0||a.isArray(J.settings.direction)&&(J.settings.direction[0]===!1||V(J.settings.direction[0])&&J.settings.direction[0]<0)&&(V(J.settings.direction[1])&&J.settings.direction[1]>=0||(Q=M(J.settings.direction[1]))))A=new Date(q,p,r+(a.isArray(J.settings.direction)?_(J.settings.direction[0]===!1?0:J.settings.direction[0]):_(J.settings.direction))),D=A.getMonth(),C=A.getFullYear(),B=A.getDate(),Q&&+Q<+A?z=Q:!Q&&a.isArray(J.settings.direction)&&(z=new Date(C,D,B-_(J.settings.direction[1]))),z&&(p=z.getMonth(),q=z.getFullYear(),r=z.getDate());if(z&&U(q,p,r)){while(U(q))z?q++:q--,p=0;while(U(q,p))z?p++:p--,p>11?(q++,p=0):p<0&&(q--,p=0),r=1;while(U(q,p,r))z?r++:r--;O=new Date(q,p,r),q=O.getFullYear(),p=O.getMonth(),r=O.getDate()}x=[],a.isArray(J.settings.disabled_dates)&&J.settings.disabled_dates.length>0&&a.each(J.settings.disabled_dates,function(){var b=this.split(" ");for(var c=0;c<4;c++){b[c]||(b[c]="*"),b[c]=b[c].indexOf(",")>-1?b[c].split(","):new Array(b[c]);for(var d=0;d<b[c].length;d++)if(b[c][d].indexOf("-")>-1){var e=b[c][d].match(/^([0-9]+)\-([0-9]+)/);if(null!=e){for(var f=_(e[1]);f<=_(e[2]);f++)a.inArray(f,b[c])==-1&&b[c].push(f+"");b[c].splice(d,1)}}for(d=0;d<b[c].length;d++)b[c][d]=isNaN(_(b[c][d]))?b[c][d]:_(b[c][d])}x.push(b)});var S=M(K.val()||(J.settings.start_date?J.settings.start_date:""));S&&U(S.getFullYear(),S.getMonth(),S.getDate())&&K.val(""),ba(S);if(!J.settings.always_visible){if(!y){if(J.settings.show_icon){var T='<button type="button" class="Zebra_DatePicker_Icon'+(K.attr("disabled")=="disabled"?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>';g=a(T),J.icon=g,I=g.add(K)}else I=K;I.bind("click",function(a){a.preventDefault(),K.attr("disabled")||(f.css("display")!="none"?J.hide():J.show())}),undefined!=g&&g.insertAfter(b)}if(undefined!=g){J.settings.inside&&g.addClass("Zebra_DatePicker_Icon_Inside");var W=K.position(),Z=K.outerHeight(!1),$=parseInt(K.css("marginTop"),10)||0,bb=K.outerWidth(!1),bc=parseInt(K.css("marginLeft"),10)||0,bd=g.outerWidth(!0),be=g.outerHeight(!0);J.settings.inside?g.css({left:W.left+bc+bb-bd,top:W.top+$+(Z-be)/2}):g.css({left:W.left+bb,top:W.top+(Z-be)/2})}}undefined!=g&&(K.is(":visible")?g.css("display","block"):g.css("display","none"));if(y)return;var T='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&laquo;</td><td class="dp_caption">&nbsp;</td><td class="dp_next">&raquo;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td>'+J.settings.lang_clear_date+"</td></tr>"+"</table>"+"</div>";f=a(T),J.datepicker=f,h=a("table.dp_header",f),i=a("table.dp_daypicker",f),j=a("table.dp_monthpicker",f),k=a("table.dp_yearpicker",f),l=a("table.dp_footer",f),J.settings.always_visible?K.attr("disabled")||(J.settings.always_visible.append(f),J.show()):a("body").append(f),f.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){a(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){a(this).removeClass("dp_hover")}),N(a("td",h)),a(".dp_previous",h).bind("click",function(){a(this).hasClass("dp_blocked")||(e=="months"?t--:e=="years"?t-=12:--s<0&&(s=11,t--),X())}),a(".dp_caption",h).bind("click",function(){e=="days"?e=a.inArray("months",H)>-1?"months":a.inArray("years",H)>-1?"years":"days":e=="months"?e=a.inArray("years",H)>-1?"years":a.inArray("days",H)>-1?"days":"months":e=a.inArray("days",H)>-1?"days":a.inArray("months",H)>-1?"months":"years",X()}),a(".dp_next",h).bind("click",function(){a(this).hasClass("dp_blocked")||(e=="months"?t++:e=="years"?t+=12:++s==12&&(s=0,t++),X())}),i.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){Y(t,s,_(a(this).html()),"days",a(this))}),j.delegate("td:not(.dp_disabled)","click",function(){var b=a(this).attr("class").match(/dp\_month\_([0-9]+)/);s=_(b[1]),a.inArray("days",H)==-1?Y(t,s,1,"months",a(this)):(e="days",J.settings.always_visible&&K.val(""),X())}),k.delegate("td:not(.dp_disabled)","click",function(){t=_(a(this).html()),a.inArray("months",H)==-1?Y(t,1,1,"years",a(this)):(e="months",J.settings.always_visible&&K.val(""),X())}),a("td",l).bind("click",function(a){a.preventDefault(),K.val(""),J.settings.always_visible||(u=null,v=null,w=null,s=null,t=null,l.css("display","none")),J.hide(),J.settings.onClear&&typeof J.settings.onClear=="function"&&J.settings.onClear(K)}),J.settings.always_visible||a(document).bind({mousedown:J._mousedown,keyup:J._keyup}),X()};J.hide=function(){J.settings.always_visible||(T("hide"),f.css("display","none"))},J.show=function(){e=J.settings.view;var b=M(K.val()||(J.settings.start_date?J.settings.start_date:""));b?(v=b.getMonth(),s=b.getMonth(),w=b.getFullYear(),t=b.getFullYear(),u=b.getDate(),U(w,v,u)&&(K.val(""),s=p,t=q)):(s=p,t=q),X();if(!J.settings.always_visible){var c=f.outerWidth(),d=f.outerHeight(),h=(undefined!=g?g.offset().left+g.outerWidth(!0):K.offset().left+K.outerWidth(!0))+J.settings.offset[0],i=(undefined!=g?g.offset().top:K.offset().top)-d+J.settings.offset[1],j=a(window).width(),k=a(window).height(),l=a(window).scrollTop(),m=a(window).scrollLeft();h+c>m+j&&(h=m+j-c),h<m&&(h=m),i+d>l+k&&(i=l+k-d),i<l&&(i=l),f.css({left:h,top:i}),f.fadeIn(a.browser.msie&&a.browser.version.match(/^[6-8]/)?0:150,"linear"),T()}else f.css("display","block")},J.update=function(b){J.original_direction&&(J.original_direction=J.direction),J.settings=a.extend(J.settings,b),L(!0)};var M=function(b){b+="";if(a.trim(b)!=""){var c=O(J.settings.format.replace(/\s/g,"")),d=["d","D","j","l","N","S","w","F","m","M","n","Y","y"],e=new Array,f=new Array;for(var g=0;g<d.length;g++)(position=c.indexOf(d[g]))>-1&&e.push({character:d[g],position:position});e.sort(function(a,b){return a.position-b.position}),a.each(e,function(a,b){switch(b.character){case"d":f.push("0[1-9]|[12][0-9]|3[01]");break;case"D":f.push("[a-z]{3}");break;case"j":f.push("[1-9]|[12][0-9]|3[01]");break;case"l":f.push("[a-z]+");break;case"N":f.push("[1-7]");break;case"S":f.push("st|nd|rd|th");break;case"w":f.push("[0-6]");break;case"F":f.push("[a-z]+");break;case"m":f.push("0[1-9]|1[012]+");break;case"M":f.push("[a-z]{3}");break;case"n":f.push("[1-9]|1[012]");break;case"Y":f.push("[0-9]{4}");break;case"y":f.push("[0-9]{2}")}});if(f.length){e.reverse(),a.each(e,function(a,b){c=c.replace(b.character,"("+f[f.length-a-1]+")")}),f=new RegExp("^"+c+"$","ig");if(segments=f.exec(b.replace(/\s/g,""))){var h,i,j,k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"],m,n=!0;e.reverse(),a.each(e,function(b,c){if(!n)return!0;switch(c.character){case"m":case"n":i=_(segments[b+1]);break;case"d":case"j":h=_(segments[b+1]);break;case"D":case"l":case"F":case"M":c.character=="D"||c.character=="l"?m=J.settings.days:m=J.settings.months,n=!1,a.each(m,function(a,d){if(n)return!0;if(segments[b+1].toLowerCase()==d.substring(0,c.character=="D"||c.character=="M"?3:d.length).toLowerCase()){switch(c.character){case"D":segments[b+1]=k[a].substring(0,3);break;case"l":segments[b+1]=k[a];break;case"F":segments[b+1]=l[a],i=a+1;break;case"M":segments[b+1]=l[a].substring(0,3),i=a+1}n=!0}});break;case"Y":j=_(segments[b+1]);break;case"y":j="19"+_(segments[b+1])}});if(n){var o=new Date(j,(i||1)-1,h||1);if(o.getFullYear()==j&&o.getDate()==(h||1)&&o.getMonth()==(i||1)-1)return o}}}return!1}},N=function(b){a.browser.mozilla?b.css("MozUserSelect","none"):a.browser.msie?b.bind("selectstart",function(){return!1}):b.mousedown(function(){return!1})},O=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},P=function(b){var c="",d=b.getDate(),e=b.getDay(),f=J.settings.days[e],g=b.getMonth()+1,h=J.settings.months[g-1],i=b.getFullYear()+"";for(var j=0;j<J.settings.format.length;j++){var k=J.settings.format.charAt(j);switch(k){case"y":i=i.substr(2);case"Y":c+=i;break;case"m":g=$(g,2);case"n":c+=g;break;case"M":h=a.isArray(J.settings.months_abbr)&&undefined!=J.settings.months_abbr[g-1]?J.settings.months_abbr[g-1]:J.settings.months[g-1].substr(0,3);case"F":c+=h;break;case"d":d=$(d,2);case"j":c+=d;break;case"D":f=a.isArray(J.settings.days_abbr)&&undefined!=J.settings.days_abbr[g-1]?J.settings.days_abbr[g-1]:J.settings.days[g-1].substr(0,3);case"l":c+=f;break;case"N":e++;case"w":c+=e;break;case"S":d%10==1&&d!="11"?c+="st":d%10==2&&d!="12"?c+="nd":d%10==3&&d!="13"?c+="rd":c+="th";break;default:c+=k}}return c},Q=function(){var b=(new Date(t,s+1,0)).getDate(),c=(new Date(t,s,1)).getDay(),d=(new Date(t,s,0)).getDate(),e=c-J.settings.first_day_of_week;e=e<0?7+e:e,W(J.settings.months[s]+", "+t);var f="<tr>";J.settings.show_week_number&&(f+="<th>"+J.settings.show_week_number+"</th>");for(var g=0;g<7;g++)f+="<th>"+(a.isArray(J.settings.days_abbr)&&undefined!=J.settings.days_abbr[(J.settings.first_day_of_week+g)%7]?J.settings.days_abbr[(J.settings.first_day_of_week+g)%7]:J.settings.days[(J.settings.first_day_of_week+g)%7].substr(0,2))+"</th>";f+="</tr><tr>";for(var g=0;g<42;g++){g>0&&g%7==0&&(f+="</tr><tr>"),g%7==0&&J.settings.show_week_number&&(f+='<td class="dp_week_number">'+bb(new Date(t,s,g-e+1))+"</td>");var h=g-e+1;if(g<e)f+='<td class="dp_not_in_month">'+(d-e+g+1)+"</td>";else if(h>b)f+='<td class="dp_not_in_month">'+(h-b)+"</td>";else{var j=(J.settings.first_day_of_week+g)%7,k="";U(t,s,h)?(a.inArray(j,J.settings.weekend_days)>-1?k="dp_weekend_disabled":k+=" dp_disabled",s==m&&t==n&&o==h&&(k+=" dp_disabled_current")):(a.inArray(j,J.settings.weekend_days)>-1&&(k="dp_weekend"),s==v&&t==w&&u==h&&(k+=" dp_selected"),s==m&&t==n&&o==h&&(k+=" dp_current")),f+="<td"+(k!=""?' class="'+a.trim(k)+'"':"")+">"+(J.settings.zero_pad?$(h,2):h)+"</td>"}}f+="</tr>",i.html(a(f)),J.settings.always_visible&&(E=a("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",i)),i.css("display","")},R=function(){W(t);var b="<tr>";for(var c=0;c<12;c++){c>0&&c%3==0&&(b+="</tr><tr>");var d="dp_month_"+c;U(t,c)?d+=" dp_disabled":v!==!1&&v==c?d+=" dp_selected":m==c&&n==t&&(d+=" dp_current"),b+='<td class="'+a.trim(d)+'">'+(a.isArray(J.settings.months_abbr)&&undefined!=J.settings.months_abbr[c]?J.settings.months_abbr[c]:J.settings.months[c].substr(0,3))+"</td>"}b+="</tr>",j.html(a(b)),J.settings.always_visible&&(F=a("td:not(.dp_disabled)",j)),j.css("display","")},S=function(){W(t-7+" - "+(t+4));var b="<tr>";for(var c=0;c<12;c++){c>0&&c%3==0&&(b+="</tr><tr>");var d="";U(t-7+c)?d+=" dp_disabled":w&&w==t-7+c?d+=" dp_selected":n==t-7+c&&(d+=" dp_current"),b+="<td"+(a.trim(d)!=""?' class="'+a.trim(d)+'"':"")+">"+(t-7+c)+"</td>"}b+="</tr>",k.html(a(b)),J.settings.always_visible&&(G=a("td:not(.dp_disabled)",k)),k.css("display","")},T=function(b){if(a.browser.msie&&a.browser.version.match(/^6/)){if(!y){var c=_(f.css("zIndex"))-1;y=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:c,position:"absolute",top:-1e3,left:-1e3,width:f.outerWidth(),height:f.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),a("body").append(y)}switch(b){case"hide":y.css("display","none");break;default:var d=f.offset();y.css({top:d.top,left:d.left,display:"block"})}}},U=function(b,c,d){if(!!a.isArray(J.settings.direction)||_(J.settings.direction)!==0){var e=_(Z(b,typeof c!="undefined"?$(c,2):"",typeof d!="undefined"?$(d,2):"")),f=(e+"").length;if(f==8&&(typeof z!="undefined"&&e<_(Z(q,$(p,2),$(r,2)))||typeof A!="undefined"&&e>_(Z(C,$(D,2),$(B,2)))))return!0;if(f==6&&(typeof z!="undefined"&&e<_(Z(q,$(p,2)))||typeof A!="undefined"&&e>_(Z(C,$(D,2)))))return!0;if(f==4&&(typeof z!="undefined"&&e<q||typeof A!="undefined"&&e>C))return!0}if(x){typeof c!="undefined"&&(c+=1);var g=!1;a.each(x,function(){if(g)return;var e=this;if(a.inArray(b,e[2])>-1||a.inArray("*",e[2])>-1)if(typeof c!="undefined"&&a.inArray(c,e[1])>-1||a.inArray("*",e[1])>-1)if(typeof d!="undefined"&&a.inArray(d,e[0])>-1||a.inArray("*",e[0])>-1){if(e[3]=="*")return g=!0;var f=(new Date(b,c-1,d)).getDay();if(a.inArray(f,e[3])>-1)return g=!0}});if(g)return!0}return!1},V=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},W=function(b){a(".dp_caption",h).html(b);if(!!a.isArray(J.settings.direction)||_(J.settings.direction)!==0){var c=t,d=s,f,g;e=="days"?(g=d-1<0?Z(c-1,"11"):Z(c,$(d-1,2)),f=d+1>11?Z(c+1,"00"):Z(c,$(d+1,2))):e=="months"?(g=c-1,f=c+1):e=="years"&&(g=c-7,f=c+7),U(g)?(a(".dp_previous",h).addClass("dp_blocked"),a(".dp_previous",h).removeClass("dp_hover")):a(".dp_previous",h).removeClass("dp_blocked"),U(f)?(a(".dp_next",h).addClass("dp_blocked"),a(".dp_next",h).removeClass("dp_hover")):a(".dp_next",h).removeClass("dp_blocked")}},X=function(){if(i.text()==""||e=="days"){if(i.text()==""){J.settings.always_visible||f.css("left",-1e3),f.css({display:"block"}),Q();var b=i.outerWidth(),c=i.outerHeight();h.css("width",b),j.css({width:b,height:c}),k.css({width:b,height:c}),l.css("width",b),f.css({display:"none"})}else Q();j.css("display","none"),k.css("display","none")}else e=="months"?(R(),i.css("display","none"),k.css("display","none")):e=="years"&&(S(),i.css("display","none"),j.css("display","none"));if(J.settings.onChange&&typeof J.settings.onChange=="function"&&undefined!=e){var d=e=="days"?i.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):e=="months"?j.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):k.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)");d.each(function(){if(e=="days")a(this).data("date",t+"-"+$(s+1,2)+"-"+$(_(a(this).text()),2));else if(e=="months"){var b=a(this).attr("class").match(/dp\_month\_([0-9]+)/);a(this).data("date",t+"-"+$(_(b[1])+1,2))}else a(this).data("date",_(a(this).text()))}),J.settings.onChange(e,d,K)}(J.settings.always_show_clear||J.settings.always_visible||K.val()!="")&&l.css("display")!="block"?l.css("display",""):l.css("display","none")},Y=function(a,b,c,d,e){var f=new Date(a,b,c,12,0,0),g=d=="days"?E:d=="months"?F:G,h=P(f);K.val(h),J.settings.always_visible&&(v=f.getMonth(),s=f.getMonth(),w=f.getFullYear(),t=f.getFullYear(),u=f.getDate(),g.removeClass("dp_selected"),e.addClass("dp_selected")),J.hide(),ba(f),J.settings.onSelect&&typeof J.settings.onSelect=="function"&&J.settings.onSelect(h,a+"-"+$(b+1,2)+"-"+$(c,2),f,K)},Z=function(){var a="";for(var b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},$=function(a,b){a+="";while(a.length<b)a="0"+a;return a},_=function(a){return parseInt(a,10)},ba=function(a){if(J.settings.pair)if(!J.settings.pair.data||!J.settings.pair.data("Zebra_DatePicker"))J.settings.pair.data("zdp_reference_date",a);else{var b=J.settings.pair.data("Zebra_DatePicker");b.update({reference_date:a}),b.settings.always_visible&&b.show()}},bb=function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e,f,g,h,i,j,k,d,l,m;return c<3?(e=b-1,f=(e/4|0)-(e/100|0)+(e/400|0),g=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),h=f-g,i=0,j=d-1+31*(c-1)):(e=b,f=(e/4|0)-(e/100|0)+(e/400|0),g=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),h=f-g,i=h+1,j=d+((153*(c-3)+2)/5|0)+58+h),k=(e+f)%7,d=(j+k-i)%7,l=j+3-d,l<0?m=53-((k-h)/5|0):l>364+h?m=1:m=(l/7|0)+1,m};J._keyup=function(a){return(f.css("display")=="block"||a.which==27)&&J.hide(),!0},J._mousedown=function(b){if(f.css("display")=="block"){if(J.settings.show_icon&&a(b.target).get(0)===g.get(0))return!0;a(b.target).parents().filter(".Zebra_DatePicker").length==0&&J.hide()}return!0},L()},a.fn.Zebra_DatePicker=function(b){return this.each(function(){if(undefined!=a(this).data("Zebra_DatePicker")){var c=a(this).data("Zebra_DatePicker");undefined!=c.icon&&c.icon.remove(),c.datepicker.remove(),a(document).unbind("keyup",c._keyup),a(document).unbind("mousedown",c._mousedown)}var c=new a.Zebra_DatePicker(this,b);a(this).data("Zebra_DatePicker",c)})}})(jQuery)